<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head>
  <meta charset="UTF-8">
  <title>Iniciar Sesión / Registrarse</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel='stylesheet' href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/css/bootstrap.min.css'>
  <link rel='stylesheet' href='https://unicons.iconscout.com/release/v2.1.9/css/unicons.css'>
  <link rel="stylesheet" th:href="@{/css/login.css}">
</head>
<body>

<a th:href="@{/}" class="btn btn-link position-absolute top-0 start-0 m-3 fs-3 text-dark" style="z-index: 999;">&times;</a>

<div class="section">
  <div class="container">
    <div class="row full-height justify-content-center">
      <div class="col-12 text-center align-self-center py-5">
        <div class="section pb-5 pt-5 pt-sm-2 text-center">

          <!-- Conmutador -->
          <h6 class="mb-0 pb-3">
            <label for="reg-log" style="margin:0; cursor:pointer;"><span>Iniciar Sesión</span></label>
            <label for="reg-log" style="margin:0; cursor:pointer;"><span>Registrarse</span></label>
          </h6>

          <!-- Conmutador visual -->
          <input class="checkbox" type="checkbox" id="reg-log" name="reg-log"
                 th:checked="${registroActivo} ? 'checked' : null" />

          <div class="card-3d-wrap mx-auto">
            <div class="card-3d-wrapper">

              <!-- LOGIN -->
              <div class="card-front">
                <div class="center-wrap">
                  <div class="section text-center">
                    <h4 class="mb-4 pb-3">Iniciar Sesión</h4>

                    <div th:if="${error}" class="alert alert-danger" th:text="${error}"></div>
                    <div th:if="${mensaje}" class="alert alert-success" th:text="${mensaje}"></div>

                    <form th:action="@{/login}" method="post">
                      <div class="form-group position-relative">
                        <input type="email" name="correo" class="form-style" placeholder="Tu Correo" required>
                        <i class="input-icon uil uil-at"></i>
                      </div>
                      <div class="form-group mt-2 position-relative">
                        <input type="password" name="clave" class="form-style" placeholder="Tu Contraseña" required>
                        <i class="input-icon uil uil-lock-alt"></i>
                      </div>
                      <button type="submit" class="btn btn-login mt-4">Ingresar</button>
                    </form>

                    <p class="mb-0 mt-4 text-center">
                      <a href="#" class="link">¿Olvidaste tu contraseña?</a>
                    </p>
                  </div>
                </div>
              </div>

              <!-- REGISTRO -->
              <div class="card-back">
                <div class="center-wrap">
                  <div class="section text-center">
                    <h4 class="mb-4 pb-3">Registrarse</h4>

                    <form th:action="@{/registro}" th:object="${usuario}" method="post">
                      <div class="form-group position-relative">
                        <input type="text" th:field="*{nombre}" class="form-style" placeholder="Tu Nombre Completo" required>
                        <i class="input-icon uil uil-user"></i>
                        <div th:if="${#fields.hasErrors('nombre')}" class="text-danger small" th:errors="*{nombre}"></div>
                      </div>
                      <div class="form-group mt-2 position-relative">
                        <input type="email" th:field="*{correo}" class="form-style" placeholder="Tu Correo" required>
                        <i class="input-icon uil uil-at"></i>
                        <div th:if="${#fields.hasErrors('correo')}" class="text-danger small" th:errors="*{correo}"></div>
                      </div>
                      <div class="form-group mt-2 position-relative">
                        <input type="password" th:field="*{clave}" class="form-style" placeholder="Tu Contraseña" required>
                        <i class="input-icon uil uil-lock-alt"></i>
                        <div th:if="${#fields.hasErrors('clave')}" class="text-danger small" th:errors="*{clave}"></div>
                        <input type="hidden" th:field="*{admin}" value="false"/>
                      </div>
                      
<input type="hidden" th:field="*{admin}" value="false"/>
                      <button type="submit" class="btn btn-register mt-4">Registrarse</button>
                      <input type="hidden" th:field="*{admin}" value="false"/>
                    </form>

                  </div>
                </div>
              </div>

              <!-- FIN -->
            </div>
          </div>

        </div>
      </div>
    </div>
  </div>
</div>

<script th:src="@{/js/login.js}"></script>
</body>
</html>
